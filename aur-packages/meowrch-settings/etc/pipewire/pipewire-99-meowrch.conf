# Meowrch PipeWire Optimizations
# Fixes audio crackling under high system load

context.properties = {
    # Minimum quantum size (buffer size)
    # Increase this if you experience audio crackling
    default.clock.min-quantum = 512
    
    # Default quantum size
    default.clock.quantum = 4096
    
    # Maximum quantum size
    default.clock.max-quantum = 8192
    
    # Sample rate
    default.clock.rate = 48000
    
    # Allowed sample rates
    default.clock.allowed-rates = [ 44100 48000 88200 96000 ]
}

# Additional optimizations for low-latency audio
context.modules = [
    {
        name = libpipewire-module-rt
        args = {
            nice.level = -11
            rt.prio = 88
            rt.time.soft = 2000000
            rt.time.hard = 2000000
        }
        flags = [ ifexists nofail ]
    }
]
